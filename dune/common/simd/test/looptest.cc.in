// @GENERATED_SOURCE@

#if HAVE_CONFIG_H
#include "config.h"
#endif

#include <cstdlib>
#include <type_traits>

#include <dune/common/simd/loop.hh>
#include <dune/common/simd/test.hh>
#include <dune/common/simd/test/looptest.hh>
#include <dune/common/std/type_traits.hh>

template<class> struct RebindAccept : std::false_type {};
#cmake @template@
template<std::size_t A>
struct RebindAccept<Dune::LoopSIMD<@SCALAR@, 5, A> > : std::true_type {};
template<std::size_t A1, std::size_t A2>
struct RebindAccept<Dune::LoopSIMD<Dune::LoopSIMD<@SCALAR@, 2, A1>, 5, A2> > : std::true_type {};
#cmake @endtemplate@

using Rebinds = Dune::Simd::RebindList<
#cmake @template@
  @SCALAR@,
#cmake @endtemplate@
  Dune::Simd::EndMark>;

int main()
{
  Dune::Simd::UnitTest test;

#cmake @template@
  test.check<Dune::LoopSIMD<@SCALAR@, 5>,
             Rebinds, Dune::Std::to_false_type, RebindAccept>();
  test.check<Dune::LoopSIMD<@SCALAR@, 5, 64>,
             Rebinds, Dune::Std::to_false_type, RebindAccept>();
  test.check<Dune::LoopSIMD<Dune::LoopSIMD<@SCALAR@, 2>, 5>,
             Rebinds, Dune::Std::to_false_type, RebindAccept>();
#cmake @endtemplate@

  return test.good() ? EXIT_SUCCESS : EXIT_FAILURE;
}
